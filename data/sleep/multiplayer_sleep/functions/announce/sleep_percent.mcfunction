execute if score #advancement variable matches 1.. as @s[scores={calc_variable=1..}] at @s run advancement grant @a only multiplayer_sleep:advancement_toast
execute if score #announce_vars variable matches ..0 run scoreboard players set @a sleep_msg_vars 1

execute as @s[scores={sleep_msg_vars=1,calc_variable=1..}] at @s run tellraw @a[nbt={Dimension:0}] [{"selector":"@s","color":"yellow"},{"text":" is now sleeping \u2014 ","color":"yellow"},{"score":{"name":"#sleep_percent","objective":"calc_variable"},"color":"yellow"},{"text":"%"},{"text":" (","color":"yellow"},{"score":{"name":"#total_sleep_count","objective":"calc_variable"},"color":"yellow"},{"text":"/","color":"yellow"},{"score":{"name":"#need_player_count","objective":"calc_variable"},"color":"yellow"},{"text":")","color":"yellow"}]
execute as @s[scores={sleep_msg_vars=2,calc_variable=1..}] at @s run tellraw @a[nbt={Dimension:0}] [{"selector":"@s","color":"yellow"},{"text":" went to bed \u2014 ","color":"yellow"},{"score":{"name":"#sleep_percent","objective":"calc_variable"},"color":"yellow"},{"text":"%"},{"text":" (","color":"yellow"},{"score":{"name":"#total_sleep_count","objective":"calc_variable"},"color":"yellow"},{"text":"/","color":"yellow"},{"score":{"name":"#need_player_count","objective":"calc_variable"},"color":"yellow"},{"text":")","color":"yellow"}]
execute as @s[scores={sleep_msg_vars=3,calc_variable=1..}] at @s run tellraw @a[nbt={Dimension:0}] [{"selector":"@s","color":"yellow"},{"text":" fell asleep while driving \u2014 ","color":"yellow"},{"score":{"name":"#sleep_percent","objective":"calc_variable"},"color":"yellow"},{"text":"%"},{"text":" (","color":"yellow"},{"score":{"name":"#total_sleep_count","objective":"calc_variable"},"color":"yellow"},{"text":"/","color":"yellow"},{"score":{"name":"#need_player_count","objective":"calc_variable"},"color":"yellow"},{"text":")","color":"yellow"}]
execute as @s[scores={sleep_msg_vars=4,calc_variable=1..}] at @s run tellraw @a[nbt={Dimension:0}] [{"selector":"@s","color":"yellow"},{"text":" nodded off \u2014 ","color":"yellow"},{"score":{"name":"#sleep_percent","objective":"calc_variable"},"color":"yellow"},{"text":"%"},{"text":" (","color":"yellow"},{"score":{"name":"#total_sleep_count","objective":"calc_variable"},"color":"yellow"},{"text":"/","color":"yellow"},{"score":{"name":"#need_player_count","objective":"calc_variable"},"color":"yellow"},{"text":")","color":"yellow"}]
execute as @s[scores={sleep_msg_vars=5,calc_variable=1..}] at @s run tellraw @a[nbt={Dimension:0}] [{"selector":"@s","color":"yellow"},{"text":" count every single sheep \u2014 ","color":"yellow"},{"score":{"name":"#sleep_percent","objective":"calc_variable"},"color":"yellow"},{"text":"%"},{"text":" (","color":"yellow"},{"score":{"name":"#total_sleep_count","objective":"calc_variable"},"color":"yellow"},{"text":"/","color":"yellow"},{"score":{"name":"#need_player_count","objective":"calc_variable"},"color":"yellow"},{"text":")","color":"yellow"}]
execute as @s[scores={sleep_msg_vars=6,calc_variable=1..}] at @s run tellraw @a[nbt={Dimension:0}] [{"selector":"@s","color":"yellow"},{"text":" closes up by blanket \u2014 ","color":"yellow"},{"score":{"name":"#sleep_percent","objective":"calc_variable"},"color":"yellow"},{"text":"%"},{"text":" (","color":"yellow"},{"score":{"name":"#total_sleep_count","objective":"calc_variable"},"color":"yellow"},{"text":"/","color":"yellow"},{"score":{"name":"#need_player_count","objective":"calc_variable"},"color":"yellow"},{"text":")","color":"yellow"}]
execute as @s[scores={sleep_msg_vars=7,calc_variable=1..}] at @s run tellraw @a[nbt={Dimension:0}] [{"selector":"@s","color":"yellow"},{"text":" chased out all monsters under the bed \u2014 ","color":"yellow"},{"score":{"name":"#sleep_percent","objective":"calc_variable"},"color":"yellow"},{"text":"%"},{"text":" (","color":"yellow"},{"score":{"name":"#total_sleep_count","objective":"calc_variable"},"color":"yellow"},{"text":"/","color":"yellow"},{"score":{"name":"#need_player_count","objective":"calc_variable"},"color":"yellow"},{"text":")","color":"yellow"}]
execute as @s[scores={sleep_msg_vars=8,calc_variable=1..}] at @s run tellraw @a[nbt={Dimension:0}] [{"selector":"@s","color":"yellow"},{"text":" fall in a dream \u2014 ","color":"yellow"},{"score":{"name":"#sleep_percent","objective":"calc_variable"},"color":"yellow"},{"text":"%"},{"text":" (","color":"yellow"},{"score":{"name":"#total_sleep_count","objective":"calc_variable"},"color":"yellow"},{"text":"/","color":"yellow"},{"score":{"name":"#need_player_count","objective":"calc_variable"},"color":"yellow"},{"text":")","color":"yellow"}]

execute as @s[scores={sleep_msg_vars=1,calc_variable=..0}] at @s run tellraw @a[nbt={Dimension:0}] [{"selector":"@s","color":"yellow"},{"text":" is now sleeping \u2014 100%","color":"yellow"}]
execute as @s[scores={sleep_msg_vars=2,calc_variable=..0}] at @s run tellraw @a[nbt={Dimension:0}] [{"selector":"@s","color":"yellow"},{"text":" went to bed \u2014 100%","color":"yellow"}]
execute as @s[scores={sleep_msg_vars=3,calc_variable=..0}] at @s run tellraw @a[nbt={Dimension:0}] [{"selector":"@s","color":"yellow"},{"text":" fell asleep while driving \u2014 100%","color":"yellow"}]
execute as @s[scores={sleep_msg_vars=4,calc_variable=..0}] at @s run tellraw @a[nbt={Dimension:0}] [{"selector":"@s","color":"yellow"},{"text":" nodded off \u2014 100%","color":"yellow"}]
execute as @s[scores={sleep_msg_vars=5,calc_variable=..0}] at @s run tellraw @a[nbt={Dimension:0}] [{"selector":"@s","color":"yellow"},{"text":" count every single sheep \u2014 100%","color":"yellow"}]
execute as @s[scores={sleep_msg_vars=6,calc_variable=..0}] at @s run tellraw @a[nbt={Dimension:0}] [{"selector":"@s","color":"yellow"},{"text":" closes up by blanket \u2014 100%","color":"yellow"}]
execute as @s[scores={sleep_msg_vars=7,calc_variable=..0}] at @s run tellraw @a[nbt={Dimension:0}] [{"selector":"@s","color":"yellow"},{"text":" chased out all monsters under the bed \u2014 100%","color":"yellow"}]
execute as @s[scores={sleep_msg_vars=8,calc_variable=..0}] at @s run tellraw @a[nbt={Dimension:0}] [{"selector":"@s","color":"yellow"},{"text":" fall in a dream \u2014 100%","color":"yellow"}]